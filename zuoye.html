<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>测试</title>
    <style>
      html, body, #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
	 </style>
	 
	 <link rel="stylesheet" href="https://js.arcgis.com/4.17/esri/themes/light/main.css">
     <script src="https://js.arcgis.com/4.17/"></script>
	  
	 <script>
    require([
      "esri/Map",
      "esri/views/MapView",
      "esri/widgets/BasemapToggle",
      "esri/widgets/Search",
      "esri/widgets/Compass",
      "esri/layers/GroupLayer",
      "esri/layers/MapImageLayer",
      "esri/widgets/LayerList",
    ], function(Map, MapView, BasemapToggle, Search, Compass, GroupLayer, MapImageLayer, LayerList, BasemapGallery) {
	
       var N1Layer = new MapImageLayer({
          url:           "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",
          title: "streets"
        });

      var N2Layer = new MapImageLayer({
          url:           "https://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",
          title: "hybrid"
        });
      
      var demographicGroupLayer = new GroupLayer({
          title: "Map",
          visible: false,
          visibilityMode: "exclusive",
          layers: [N1Layer, N2Layer],
          opacity: 0.75
        });
   
      var map = new Map({
        basemap: "topo-vector",
		ground: "world-elevation",
        layers: [demographicGroupLayer]
      });

      var view = new MapView({
        container: "viewDiv",
        map: map,
        center: [116.00000, 40.00000], 
        zoom: 10
      });
      
      function defineActions(event) {
          var item = event.item;
          if (item.title === "Map") {
          item.actionsSections = [
              [
                {
                  title: "全屏",
                  className: "esri-icon-zoom-out-fixed",
                  id: "full-extent"
                },
               {
                  title: "图层信息",
                  className: "esri-icon-description",
                  id: "information"
               }
              ],
            ];
          }
        }

          view.when(function () {
          var layerList = new LayerList({
            view: view,
            listItemCreatedFunction: defineActions
          });
          layerList.on("trigger-action", function (event) {
          var visibleLayer = N1Layer.visible ? N1Layer : N2Layer;
          var id = event.action.id;
          if (id === "full-extent") {
          view.goTo(visibleLayer.fullExtent).catch(function (error) {
             if (error.name != "AbortError") {
             console.error(error);
             }
          });
             } else if (id === "information") {
              window.open(visibleLayer.url);
             } 
          });
          view.ui.add(layerList, "top-right");
         });

      var basemapToggle = new BasemapToggle({
      view: view,
      nextBasemap: "satellite"
      });
      view.ui.add(basemapToggle, "bottom-right");
      
      var searchWidget = new Search({ view: view });
      view.ui.add(searchWidget, {
      position: "top-right",
      index: 2
      });
     
      var compass = new Compass({
      view: view
      });
      view.ui.add(compass, "top-left");
	  


	  
    });
	
    </script>
  
  </head>
  <body>
    <div id="viewDiv"></div>
  </body>
</html>